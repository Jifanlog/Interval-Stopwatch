<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Timers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
        }
        .timer {
            font-size: 2em;
            margin-bottom: 10px;
        }
        button, input {
            font-size: 1em;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="timers"></div>
    <button id="addTimer">Add Timer</button>
    <button id="start">Start</button>
    <button id="stop">Stop</button>
    <button id="reset">Reset</button>

    <script>
        let timers = [];
        let timerIntervals = [];
        let running = false;

        function addTimer(minutes = 0, seconds = 30) {
            const timerId = timers.length;
            timers.push({ minutes, seconds, milliseconds: 0 });
            const timerDiv = document.createElement("div");
            timerDiv.className = "timer";
            timerDiv.id = `timer${timerId}`;
            timerDiv.innerHTML = `
                <input type="number" min="0" id="minutes${timerId}" value="${minutes}" style="width: 50px;"> :
                <input type="number" min="0" max="59" id="seconds${timerId}" value="${seconds}" style="width: 50px;"> :
                000
            `;
            document.getElementById("timers").appendChild(timerDiv);
        }

        function updateDisplay(timerId) {
            const timer = timers[timerId];
            document.getElementById(`timer${timerId}`).innerHTML = 
                `${String(timer.minutes).padStart(2, '0')}:${String(timer.seconds).padStart(2, '0')}:${String(timer.milliseconds).padStart(3, '0')}`;
        }

        function startTimer(index = 0) {
            if (index >= timers.length) return;
            if (!running) running = true;

            const timer = timers[index];
            timerIntervals[index] = setInterval(() => {
                if (timer.milliseconds === 0) {
                    if (timer.seconds === 0) {
                        if (timer.minutes === 0) {
                            clearInterval(timerIntervals[index]);
                            startTimer(index + 1);
                            return;
                        } else {
                            timer.minutes--;
                            timer.seconds = 59;
                            timer.milliseconds = 990;
                        }
                    } else {
                        timer.seconds--;
                        timer.milliseconds = 990;
                    }
                } else {
                    timer.milliseconds -= 10;
                }
                updateDisplay(index);
            }, 10);
        }

        function stopTimers() {
            running = false;
            timerIntervals.forEach(clearInterval);
        }

        function resetTimers() {
            stopTimers();
            document.getElementById("timers").innerHTML = "";
            timers = [];
            timerIntervals = [];
            addTimer();
        }

        document.getElementById("addTimer").addEventListener("click", () => addTimer());
        document.getElementById("start").addEventListener("click", () => startTimer(0));
        document.getElementById("stop").addEventListener("click", stopTimers);
        document.getElementById("reset").addEventListener("click", resetTimers);

        addTimer();
    </script>
</body>
</html>
